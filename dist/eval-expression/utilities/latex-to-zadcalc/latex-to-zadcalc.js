const latexToZadcalc=e=>{let a=e;a=a.replace(/\s+/g," ").trim(),a=a.replace(/(\d+\.?\d*)\s*\\times\s*10\s*\^\s*\{([+-]?\d+)\}/g,"$1e$2"),a=a.replace(/(\d+\.?\d*)\s*\\times\s*10\s*\^\s*([+-]?\d+)(?!\d)/g,"$1e$2"),a=a.replace(/(\d+\.?\d*)\s*\\cdot\s*10\s*\^\s*\{([+-]?\d+)\}/g,"$1e$2"),a=a.replace(/(\d+\.?\d*)\s*\\cdot\s*10\s*\^\s*([+-]?\d+)(?!\d)/g,"$1e$2"),a=a.replace(/\\left\s*\\\{/g,"\\left("),a=a.replace(/\\right\s*\\\}/g,"\\right)"),a=a.replace(/\\left/g,""),a=a.replace(/\\right/g,""),a=a.replace(/\\[bB]igg?[lr]?/g,""),a=a.replace(/\\operatorname\{([^{}]+)\}/g,"$1"),a=a.replace(/\bsen\b/g,"sin"),a=a.replace(/\bsenh\b/g,"sinh"),a=a.replace(/\btgh\b/g,"tanh"),a=a.replace(/\\mathrm\{([^{}]+)\}/g,"$1"),a=a.replace(/\\text\{([^{}]+)\}/g,"$1"),a=a.replace(/\\mathbf\{([^{}]+)\}/g,"$1"),"\\frac{2-3+4}{2^{24}-2^{23}}-\\operatorname{sen}(92-3)"===e&&console.log("ANTES FASE 3:",a),a=a.replace(/\\([dt]?)frac\s*\{\s*/g,"\\$1frac{"),a=a.replace(/\s*\}\s*\{/g,"}{"),a=a.replace(/\s*\}/g,"}");for(let e=0;e<20;e++){let e=a;if(a=a.replace(/\\([dt]?)frac\{([^{}]+)\}\{([^{}]+)\}/g,"($2)/($3)"),a=a.replace(/\\([dt]?)frac\{([^{}]*\{[^{}]*\}[^{}]*)\}\{([^{}]+)\}/g,"($2)/($3)"),a=a.replace(/\\([dt]?)frac\{([^{}]+)\}\{([^{}]*\{[^{}]*\}[^{}]*)\}/g,"($2)/($3)"),a=a.replace(/\\([dt]?)frac\{([^{}]*\{[^{}]*\}[^{}]*)\}\{([^{}]*\{[^{}]*\}[^{}]*)\}/g,"($2)/($3)"),a=a.replace(/\\([dt]?)frac\{([^{}]+)\}\{([^{}]*\{[^{}]*\}[^{}]*\{[^{}]*\}[^{}]*)\}/g,"($2)/($3)"),a===e)break}"\\frac{2-3+4}{2^{24}-2^{23}}-\\operatorname{sen}(92-3)"===e&&console.log("DEPOIS DA FASE 3:",a),a=a.replace(/\\sqrt\s*\[\s*/g,"\\sqrt["),a=a.replace(/\]\s*\{/g,"]{"),a=a.replace(/\\sqrt\s*\{/g,"\\sqrt{"),a=a.replace(/\\sqrt\[(\d+)\]\{([^{}]+)\}/g,"nroot($2,$1)"),a=a.replace(/\\sqrt\{([^{}]+)\}/g,"sqrt($1)");const c={"\\\\sin":"sin","\\\\cos":"cos","\\\\tan":"tan","\\\\sec":"sec","\\\\csc":"csc","\\\\cot":"cot"};for(const[e,s]of Object.entries(c))a=a.replace(new RegExp(`${e}\\s*\\(`,"g"),`${s}(`),a=a.replace(new RegExp(`${e}\\s+([^\\s+\\-*/^()\\[\\]{}]+)`,"g"),`${s}($1)`),a=a.replace(new RegExp(`${e}\\s*\\{`,"g"),`${s}{`);a=a.replace(/\\arcsin\s*\(/g,"asin("),a=a.replace(/\\arcsin\s+([^\s+\-*/^()\[\]{}]+)/g,"asin($1)"),a=a.replace(/\\arcsin\s*\{/g,"asin{"),a=a.replace(/\\arccos\s*\(/g,"acos("),a=a.replace(/\\arccos\s+([^\s+\-*/^()\[\]{}]+)/g,"acos($1)"),a=a.replace(/\\arccos\s*\{/g,"acos{"),a=a.replace(/\\arctan\s*\(/g,"atan("),a=a.replace(/\\arctan\s+([^\s+\-*/^()\[\]{}]+)/g,"atan($1)"),a=a.replace(/\\arctan\s*\{/g,"atan{"),a=a.replace(/\\sin\s*\^\s*\{-1\}\s*\(/g,"asin("),a=a.replace(/\\cos\s*\^\s*\{-1\}\s*\(/g,"acos("),a=a.replace(/\\tan\s*\^\s*\{-1\}\s*\(/g,"atan(");const s={"\\\\sinh":"sinh","\\\\cosh":"cosh","\\\\tanh":"tanh"};for(const[e,c]of Object.entries(s))a=a.replace(new RegExp(`${e}\\s*\\(`,"g"),`${c}(`),a=a.replace(new RegExp(`${e}\\s+([^\\s+\\-*/^()\\[\\]{}]+)`,"g"),`${c}($1)`),a=a.replace(new RegExp(`${e}\\s*\\{`,"g"),`${c}{`);return a=a.replace(/\\sinh\s*\^\s*\{-1\}\s*\(/g,"asinh("),a=a.replace(/\\cosh\s*\^\s*\{-1\}\s*\(/g,"acosh("),a=a.replace(/\\tanh\s*\^\s*\{-1\}\s*\(/g,"atanh("),a=a.replace(/\\text\{arcsinh\}\s*\(/g,"asinh("),a=a.replace(/\\text\{arccosh\}\s*\(/g,"acosh("),a=a.replace(/\\text\{arctanh\}\s*\(/g,"atanh("),a=a.replace(/\\ln\s*\(/g,"ln("),a=a.replace(/\\ln\s+([^\s+\-*/^()\[\]{}]+)/g,"ln($1)"),a=a.replace(/\\ln\s*\{/g,"ln{"),a=a.replace(/\\log\s*_\s*\{([^{}]+)\}\s*\(([^()]+)\)/g,"log($2,$1)"),a=a.replace(/\\log\s*_\s*(\d+)\s*\(([^()]+)\)/g,"log($2,$1)"),a=a.replace(/\\log\s*\(/g,"log("),a=a.replace(/\\log\s+([^\s+\-*/^()\[\]{}]+)/g,"log($1)"),a=a.replace(/\\log\s*\{/g,"log{"),a=a.replace(/\\exp\s*\(/g,"exp("),a=a.replace(/\\exp\s+([^\s+\-*/^()\[\]{}]+)/g,"exp($1)"),a=a.replace(/\\exp\s*\{/g,"exp{"),a=a.replace(/\|([^|]+)\|/g,"abs($1)"),a=a.replace(/\\max\s*\\\{([^{}]+)\\\}/g,"max($1)"),a=a.replace(/\\min\s*\\\{([^{}]+)\\\}/g,"min($1)"),a=a.replace(/\\max\s*\{/g,"max{"),a=a.replace(/\\min\s*\{/g,"min{"),a=a.replace(/\\max\s*\(/g,"max("),a=a.replace(/\\min\s*\(/g,"min("),a=a.replace(/(\d+|[a-zA-Z])\s*!/g,"factorial($1)"),a=a.replace(/\^\s*\{([^{}]+)\}/g,"^($1)"),a=a.replace(/\\pi/g,"PI"),a=a.replace(/\\Pi/g,"PI"),a=a.replace(/\\tau/g,"TAU"),a=a.replace(/\\phi/g,"PHI"),a=a.replace(/\\varphi/g,"PHI"),a=a.replace(/\be\b/g,"E"),a=a.replace(/\\times/g,"*"),a=a.replace(/\\cdot/g,"*"),a=a.replace(/\\div/g,"/"),a=a.replace(/\\\{/g,"___LBRACE___"),a=a.replace(/\\\}/g,"___RBRACE___"),a=a.replace(/\{/g,"("),a=a.replace(/\}/g,")"),a=a.replace(/___LBRACE___/g,"{"),a=a.replace(/___RBRACE___/g,"}"),a=a.replace(/\\,/g,""),a=a.replace(/\\;/g,""),a=a.replace(/\\:/g,""),a=a.replace(/\\quad/g,""),a=a.replace(/\\qquad/g,""),a=a.replace(/\\ /g,""),a=a.replace(/~/g,""),a=a.replace(/\s+/g,""),a=a.replace(/\(\)/g,""),a=a.replace(/\\/g,""),a};module.exports=latexToZadcalc;