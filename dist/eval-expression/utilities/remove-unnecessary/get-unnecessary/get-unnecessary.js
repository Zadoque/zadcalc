const add_sub_inside_regex=/[-+]?\d+(\.\d+)?(e[+-]?\d+)?[+-]/,pow_mult_div_inside_regex=/[*\/^]/,unit_number_signed_regex=/^[+-]\d+(\.\d+)?(e[+-]?\d+)?$/,unit_number_not_signed_regex=/^\d+(\.\d+)?(e[+-]?\d+)?$/,inner_most_regex=/\([^()]*\)|\[[^\[\]]*\]|\{[^{}]*\}/g;function getLevel0Op(e){let o=e;for(;inner_most_regex.test(o);)o=o.replace(inner_most_regex,"1");return{has_add_sub:add_sub_inside_regex.test(o),has_pow_mult_div:pow_mult_div_inside_regex.test(o),is_unit_signed:unit_number_signed_regex.test(e),is_unit_not_signed:unit_number_not_signed_regex.test(e),is_empty:""===o,inside_simplified:o}}function hasItToBeRemoved(e,o,s){const[n,t]=o;if(e.is_unit_signed&&("-"!==n||0!==s)||e.is_unit_not_signed)return!0;if(e.is_empty)return"/"!==n;let i=!0;return("^"===n||"-"===n&&e.has_add_sub||"/"===n&&(e.has_add_sub||e.has_pow_mult_div)||"*"===n&&e.has_add_sub||"-"===n&&0===s&&e.is_unit_signed)&&(i=!1),i&&"^"===t&&(i=!1),i&&"*"===t&&e.has_add_sub&&(i=!1),i&&"/"===t&&e.has_add_sub&&(i=!1),i}const getUnnecessary=e=>{let o=[],s=[],n=[],t=[],i=e,l=!1;"{2*[3+4*(5-2)]-1}/[2+1]"===e&&(l=!0);for(let e=0;e<i.length;e++)if(/[{[(]/.test(i[e]))o.push([i[e],e,e>0?i[e-1]:""]);else if(/[}\])]/.test(i[e])){let t=o.pop();s.push([t[1],e]),n.push([t[2],e<i.length-1?i[e+1]:""])}for(let o=0;o<s.length;o++){if(/\(\)|\[\]|\{\}|^$/.test(`${n[o][0]}${n[o][1]}`))return t.push(s[o][0]),t.push(s[o][1]),t;let _=getLevel0Op(i.slice(s[o][0]+1,s[o][1]));if(hasItToBeRemoved(_,n[o],s[o][0]-1))return t.push(s[o][0]),t.push(s[o][1]),l&&(console.log("╔════════════════════════════════════════════════════════════════"),console.log("║ AGRUPAMENTO REMOVÍVEL ENCONTRADO"),console.log("╠════════════════════════════════════════════════════════════════"),console.log(`║ Expressão completa: "${e}"`),console.log("║"),console.log(`║ Posições: [${s[o][0]}, ${s[o][1]}]`),console.log(`║ Agrupamento: ${e[s[o][0]]}...${e[s[o][1]]}`),console.log(`║ Conteúdo interno: "${e.slice(s[o][0]+1,s[o][1])}"`),console.log("║"),console.log("║ Contexto:"),console.log(`║   Caractere ANTES: "${n[o][0]}" (pos ${s[o][0]-1})`),console.log(`║   Caractere DEPOIS: "${n[o][1]}" (pos ${s[o][1]+1})`),console.log("║"),console.log("║ Análise do conteúdo:"),console.log(`║   Simplificado: "${_.inside_simplified}"`),console.log(`║   Tem +/-: ${_.has_add_sub}`),console.log(`║   Tem */^: ${_.has_pow_mult_div}`),console.log(`║   É número com sinal: ${_.is_unit_signed}`),console.log(`║   É número sem sinal: ${_.is_unit_not_signed}`),console.log(`║   Está vazio: ${_.is_empty}`),console.log("║"),console.log(`║ Índice do par: ${o} de ${s.length-1}`),console.log(`║ Total a remover: [${t.join(", ")}]`),console.log("╚════════════════════════════════════════════════════════════════\n")),t}return t};module.exports=getUnnecessary;